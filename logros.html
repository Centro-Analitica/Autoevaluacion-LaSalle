<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="stylo-log.css">
  <title>Logros</title>
</head>
<link rel="icon" type="image/jpg" href="imagenes/Logo-Universidad-de-La-Salle.jpg">
<body>
  <header>
    <div class="header-content">
      <a href="index.html" class="home-link" title="Volver a inicio">
        <span class="home-icon">🏢</span>
      </a>
      <h1>Logros</h1>
    </div>
  </header>

  <!-- Encabezado superior -->
  <div class="top-header">
    <img src="imagenes/Logosimbolo_color.png" alt="Logo La Salle" class="logo">
    <form id="searchForm" onsubmit="buscarContenido(event)">
      <input type="text" placeholder="Buscar..." class="search-box" id="searchInput">
    </form>
    <div class="top-header">
      <img src="imagenes/Auto_la_salle__2.0_-removebg-preview.png" alt="Autoevaluación" class="logo">
    </div>
  </div>

  <div id="logrosContainer"></div>

  <script>
        const logrosPorEje = [ 
      { 
        eje: "Gestión Institucional", 
        logros: [ 
          {
            nombre: "Se fortalecieron los procesos de planeación estratégica",
            bloques: [
              { tipo: "descripcion", texto: "Descripción detallada del logro de planeación estratégica..." },
              { tipo: "imagen", src: "imagenes/.png", alt: "Imagen de planeación estratégica" },
              { tipo: "tabla", datos: {
                titulo: "Estadísticas de planeación",
                columnas: ["Indicador", "Valor"],
                filas: [["Cumplimiento", "95%"], ["Satisfacción", "87%"]]
              }}
            ]
          }, 
          {
            nombre: "Se implementó un sistema integrado de gestión institucional",
            bloques: [
              { tipo: "descripcion", texto: "Descripción detallada del sistema integrado de gestión..." },
              { tipo: "tabla", datos: {
                titulo: "Resultados del sistema",
                columnas: ["Componente", "Estado"],
                filas: [["Procesos documentados", "100%"], ["Auditorías internas", "Completadas"]]
              }}
            ]
          } 
        ] 
      }, 
      { 
        eje: "Académico", 
        logros: [ 
          {
            nombre: "Mejoramiento de los planes de estudio",
            bloques: [
              { tipo: "descripcion", texto: "Descripción detallada del mejoramiento de planes de estudio..." },
              { tipo: "imagen", src: "imagenes/autoeva.png", alt: "Imagen de planes de estudio" }
            ]
          }, 
          {
            nombre: "Fortalecimiento del cuerpo docente",
            bloques: [
              { tipo: "descripcion", texto: "Descripción detallada del fortalecimiento docente..." },
              { tipo: "tabla", datos: {
                titulo: "Estadísticas docentes",
                columnas: ["Nivel de formación", "Porcentaje"],
                filas: [["Doctorado", "35%"], ["Maestría", "60%"], ["Especialización", "5%"]]
              }}
            ]
          } 
        ] 
      }, 
      { 
        eje: "Investigación", 
        logros: [ 
          {
            nombre: "Incremento de grupos categorizados en Colciencias",
            bloques: [
              { tipo: "descripcion", texto: "Descripción detallada del incremento de grupos..." }
            ]
          }, 
          {
            nombre: "Mayor participación en convocatorias nacionales",
            bloques: [
              { tipo: "descripcion", texto: "Descripción detallada de la participación en convocatorias..." }
            ]
          } 
        ] 
      }, 
      { 
        eje: "Proyección Social", 
        logros: [ 
          {
            nombre: "Aumento en el número de convenios con comunidades",
            bloques: [
              { tipo: "descripcion", texto: "Descripción detallada del aumento de convenios..." }
            ]
          }, 
          {
            nombre: "Ejecución de proyectos de impacto social",
            bloques: [
              { tipo: "descripcion", texto: "Descripción detallada de los proyectos de impacto social..." }
            ]
          } 
        ] 
      }, 
      { 
        eje: "Bienestar", 
        logros: [ 
          {
            nombre: "Programas de salud física y mental consolidados",
            bloques: [
              { tipo: "descripcion", texto: "Descripción detallada de los programas de salud..." }
            ]
          }, 
          {
            nombre: "Ampliación de espacios deportivos y culturales",
            bloques: [
              { tipo: "descripcion", texto: "Descripción detallada de la ampliación de espacios..." }
            ]
          } 
        ] 
      }, 
      { 
        eje: "Internacionalización", 
        logros: [ 
          {
            nombre: "Participación en redes internacionales",
            bloques: [
              { tipo: "descripcion", texto: "Descripción detallada de la participación en redes..." }
            ]
          }, 
          {
            nombre: "Movilidad estudiantil y docente fortalecida",
            bloques: [
              { tipo: "descripcion", texto: "Descripción detallada de la movilidad estudiantil y docente..." }
            ]
          } 
        ] 
      } 
    ];

    // Función para crear tablas HTML
    function crearTablaHTML(datos) {
      // Crear elemento tabla
      const tabla = document.createElement('table');
      tabla.style.width = '100%';
      tabla.style.borderCollapse = 'collapse';
      tabla.style.marginTop = '20px';
      tabla.style.marginBottom = '20px';
      tabla.style.boxShadow = '0 2px 3px rgba(0,0,0,0.1)';
      
      // Crear encabezado si hay columnas
      if (datos.columnas && datos.columnas.length > 0) {
        const thead = document.createElement('thead');
        const tr = document.createElement('tr');
        
        // Estilo para el encabezado
        tr.style.backgroundColor = '#003057';
        tr.style.color = 'white';
        
        // Agregar cada columna al encabezado
        datos.columnas.forEach(columna => {
          const th = document.createElement('th');
          th.textContent = columna;
          th.style.padding = '10px';
          th.style.textAlign = 'left';
          th.style.fontWeight = 'bold';
          tr.appendChild(th);
        });
        
        thead.appendChild(tr);
        tabla.appendChild(thead);
      }
      
      // Crear cuerpo de la tabla
      const tbody = document.createElement('tbody');
      
      // Agregar filas y celdas
      if (datos.filas && datos.filas.length > 0) {
        datos.filas.forEach((fila, index) => {
          const tr = document.createElement('tr');
          
          // Alternar colores de fondo para las filas
          if (index % 2 === 0) {
            tr.style.backgroundColor = '#f9f9f9';
          }
          
          // Agregar cada celda a la fila
          fila.forEach(celda => {
            const td = document.createElement('td');
            
            // Verificar si el contenido tiene formato de lista con guiones
            if (typeof celda === 'string' && celda.includes('- ')) {
              // Dividir por comas seguidas de guión
              const items = celda.split(', -');
              
              // Si hay múltiples elementos, formatearlos como lista
              if (items.length > 1) {
                // Crear un contenedor para la lista
                const ul = document.createElement('ul');
                ul.style.margin = '5px 0';
                ul.style.paddingLeft = '20px';
                
                // Procesar el primer elemento (puede tener un guión al principio)
                let firstItem = items[0];
                if (firstItem.startsWith('- ')) {
                  firstItem = firstItem.substring(2);
                }
                
                const li1 = document.createElement('li');
                li1.textContent = firstItem;
                ul.appendChild(li1);
                
                // Procesar el resto de elementos
                for (let i = 1; i < items.length; i++) {
                  const li = document.createElement('li');
                  li.textContent = items[i].trim();
                  ul.appendChild(li);
                }
                
                td.appendChild(ul);
              } else {
                // Si solo hay un elemento, simplemente mostrar el texto
                td.textContent = celda;
              }
            } else {
              // Para contenido normal, simplemente mostrar el texto
              td.textContent = celda;
            }
            
            td.style.padding = '8px';
            td.style.borderBottom = '1px solid #ddd';
            tr.appendChild(td);
          });
          
          tbody.appendChild(tr);
        });
      }
      
      tabla.appendChild(tbody);
      return tabla;
    }

    const container = document.getElementById('logrosContainer');
    
    // Crear los botones de ejes con su contenido desplegable
    logrosPorEje.forEach((eje, i) => {
      // Crear un div contenedor para cada eje y su contenido
      const ejeContainer = document.createElement('div');
      ejeContainer.className = 'eje-container';
      
      // Crear el botón
      const button = document.createElement('button');
      button.className = 'button';
      button.textContent = `${i + 1}. Eje: ${eje.eje}`;
      button.setAttribute('data-index', i);
      
      // Crear el contenedor para el contenido desplegable
      const contenido = document.createElement('div');
      contenido.className = 'eje-contenido'; // Clase específica para contenido de eje
      contenido.id = `eje-${i}`;
      
      // Agregar título
      const titulo = document.createElement('h3');
      titulo.textContent = `Eje ${i + 1}: ${eje.eje}`;
      contenido.appendChild(titulo);
      
      // Agregar lista de logros con desglose
      const lista = document.createElement('ul');
      
      // Procesar los logros
      eje.logros.forEach((logro, j) => {
        const li = document.createElement('li');
        li.className = 'logro-item';
        li.setAttribute('data-logro-index', j);
        
        // Si el logro es un objeto con propiedades
        if (typeof logro === 'object') {
          // Crear el encabezado del logro
          const header = document.createElement('div');
          header.className = 'logro-header';
          header.textContent = logro.nombre;
          li.appendChild(header);
          
          // Crear el contenedor para el contenido desplegable
          const logroContenido = document.createElement('div');
          logroContenido.className = 'logro-contenido'; // Usar la misma clase para consistencia
          
          // Procesar bloques en orden
          if (Array.isArray(logro.bloques)) {
            logro.bloques.forEach(bloque => {
              if (bloque.tipo === "descripcion") {
                const p = document.createElement('p');
                // Transformar el texto para convertir listas en HTML con indentación
                const textoFormateado = bloque.texto.replace(/\n\n•\s*([^\n]+)/g, function(match, contenido) {
                  return '\n<div style="padding-left: 20px; margin-top: 5px;">•&nbsp;' + contenido + '</div>';
                });
                p.innerHTML = textoFormateado;
                p.style.whiteSpace = 'pre-line';
                logroContenido.appendChild(p);
              }

              if (bloque.tipo === "imagen") {
                const img = document.createElement('img');
                img.src = bloque.src;
                img.alt = bloque.alt || 'Imagen descriptiva';
                img.className = 'logro-imagen';
                img.style.display = 'block';
                img.style.margin = '20px auto';
                img.style.maxWidth = '100%';
                img.style.height = 'auto';
                logroContenido.appendChild(img);
              }

              if (bloque.tipo === "tabla") {
                if (bloque.datos.titulo) {
                  const titulo = document.createElement('h4');
                  titulo.textContent = bloque.datos.titulo;
                  titulo.style.marginTop = '30px';
                  titulo.style.marginBottom = '15px';
                  titulo.style.textAlign = 'center';
                  titulo.style.color = '#333';
                  logroContenido.appendChild(titulo);
                }
                const tabla = crearTablaHTML(bloque.datos);
                logroContenido.appendChild(tabla);
              }
            });
          } else if (logro.descripcion) {
            // Si no hay bloques pero hay descripción, mostrar la descripción
            const p = document.createElement('p');
            p.textContent = logro.descripcion;
            p.style.whiteSpace = 'pre-line';
            logroContenido.appendChild(p);
          }
          
          // Agregar el contenido desplegable al elemento de lista
          li.appendChild(logroContenido);
        } else {
          // Si el logro es un string, usarlo directamente
          li.textContent = logro;
        }
        
        lista.appendChild(li);
      });
      
      contenido.appendChild(lista);
      
      // Agregar el botón y su contenido al contenedor
      ejeContainer.appendChild(button);
      ejeContainer.appendChild(contenido);
      
      // Agregar el contenedor al DOM
      container.appendChild(ejeContainer);
      
      // Agregar evento de clic para el botón de eje
      button.addEventListener('click', function() {
        const ejeId = `eje-${this.getAttribute('data-index')}`;
        const ejeContenido = document.getElementById(ejeId);
        
        // Cerrar todos los demás ejes
        document.querySelectorAll('.eje-contenido').forEach(el => {
          if (el.id !== ejeId) {
            el.classList.remove('activo');
          }
        });
        
        // Quitar clase 'abierto' de todos los botones
        document.querySelectorAll('.button').forEach(btn => {
          if (btn !== this) {
            btn.classList.remove('abierto');
          }
        });
        
        // Alternar el estado del actual
        this.classList.toggle('abierto');
        ejeContenido.classList.toggle('activo');
        
        // Hacer scroll al contenido si está abierto
        if (ejeContenido.classList.contains('activo')) {
          ejeContenido.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      });
    });
    
    // Agregar evento de clic para los logros individuales
    document.addEventListener('click', function(e) {
      const logroItem = e.target.closest('.logro-item');
      const logroHeader = e.target.closest('.logro-header');
      
      if (logroHeader && logroItem) {
        // Evitar que el clic se propague si es dentro del contenido ya desplegado
        if (e.target.closest('.logro-contenido')) {
          return;
        }

        // Cerrar todos los demás logros en el mismo eje
        const ejeContenido = logroItem.closest('.eje-contenido');
        if (ejeContenido) {
          ejeContenido.querySelectorAll('.logro-item').forEach(item => {
            if (item !== logroItem) {
              item.classList.remove('abierto');
              const contenido = item.querySelector('.logro-contenido');
              if (contenido) {
                contenido.classList.remove('activo');
              }
            }
          });
        }
        
        // Alternar la clase 'abierto' para el elemento de lista
        logroItem.classList.toggle('abierto');
        
        // Alternar la visibilidad del contenido
        const logroContenido = logroItem.querySelector('.logro-contenido');
        if (logroContenido) {
          logroContenido.classList.toggle('activo');
        }
      }
    });
    
    // Función de búsqueda
    function buscarContenido(event) {
      event.preventDefault(); // Evita que el formulario se envíe
      
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      if (!searchTerm) return; // No buscar si está vacío
      
      // Elementos donde buscaremos (puedes agregar más)
      const elementos = document.querySelectorAll('h1, h2, h3, p, li, .button');
      
      // Limpiar resaltados anteriores
      document.querySelectorAll('.resaltado').forEach(el => {
        el.classList.remove('resaltado');
        el.style.backgroundColor = '';
      });
      
      // Buscar en los elementos
      let primerElementoEncontrado = null;
      
      elementos.forEach(elemento => {
        if (elemento.innerText.toLowerCase().includes(searchTerm)) {
          // Resaltar temporalmente
          elemento.style.backgroundColor = '#F2A900';
          elemento.style.transition = 'background-color 0.5s';
          elemento.classList.add('resaltado');
          
          // Si el elemento está dentro de un contenido desplegable, abrirlo
          const ejeContenido = elemento.closest('.eje-contenido');
          if (ejeContenido && !ejeContenido.classList.contains('activo')) {
            const index = ejeContenido.id.split('-')[1];
            const boton = document.querySelector(`.button[data-index="${index}"]`);
            if (boton) {
              // Cerrar todos los demás
              document.querySelectorAll('.eje-contenido').forEach(el => {
                if (el.id !== ejeContenido.id) {
                  el.classList.remove('activo');
                }
              });
              
              // Quitar clase 'abierto' de todos los botones
              document.querySelectorAll('.button').forEach(btn => {
                if (btn !== boton) {
                  btn.classList.remove('abierto');
                }
              });
              
              // Abrir el actual
              boton.classList.add('abierto');
              ejeContenido.classList.add('activo');
            }
          }
          
          // Si el elemento está dentro de un logro, abrir ese logro
          const logroItem = elemento.closest('.logro-item');
          if (logroItem && !logroItem.classList.contains('abierto')) {
            logroItem.classList.add('abierto');
            const logroContenido = logroItem.querySelector('.logro-contenido');
            if (logroContenido) {
              logroContenido.classList.add('activo');
            }
          }
          
          // Guardar referencia al primer elemento encontrado
          if (!primerElementoEncontrado) {
            primerElementoEncontrado = elemento;
          }
        }
      });
      
      // Hacer scroll al primer elemento encontrado
      if (primerElementoEncontrado) {
        primerElementoEncontrado.scrollIntoView({ 
          behavior: 'smooth',
          block: 'center'
        });
        
        // Volver al color original después de 3 segundos
        setTimeout(() => {
          document.querySelectorAll('.resaltado').forEach(el => {
            el.style.backgroundColor = '';
          });
        }, 3000);
      }
    }
  </script>
  <footer class="footer">
    <div class="footer-content">
      <span class="left">Universidad de La Salle - Autoevaluación Institucional © 2025</span>
      <span class="right">Dirección de Planeación Estratégica - Centro de Analítica - Autoevaluación y Registro Calificado</span>
    </div>
  </footer>

</body>
</html>
